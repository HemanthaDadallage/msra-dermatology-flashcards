<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>MSRA Flashcards Hub</title>
<style>
:root{
  --bg1:#0b1020;
  --bg2:#1b2a4a;
  --glass:rgba(255,255,255,.08);
  --stroke:rgba(255,255,255,.15);
  --text:rgba(255,255,255,.95);
  --muted:rgba(255,255,255,.75);
  --radius:18px;
}
*{box-sizing:border-box}
body{
  margin:0;
  min-height:100vh;
  font-family:system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial;
  background:linear-gradient(135deg,var(--bg1),var(--bg2));
  color:var(--text);
}
.container{
  max-width:1100px;
  margin:40px auto;
  padding:24px;
}
.card{
  background:var(--glass);
  border:1px solid var(--stroke);
  border-radius:var(--radius);
  padding:24px;
  box-shadow:0 20px 60px rgba(0,0,0,.4);
}
h1{margin:0 0 8px 0}
p{color:var(--muted)}
.controls{
  display:flex;
  gap:12px;
  flex-wrap:wrap;
  margin:16px 0 20px;
}
select,button{
  background:rgba(255,255,255,.12);
  border:1px solid var(--stroke);
  color:white;
  padding:10px 14px;
  border-radius:12px;
  font-size:14px;
}
button{cursor:pointer}
iframe{
  width:100%;
  height:75vh;
  border:none;
  border-radius:14px;
  background:white;
}
.footer{
  margin-top:16px;
  font-size:13px;
  color:var(--muted);
}
  /* ‚úÖ Windows dropdown visibility fix */
select {
  background: #ffffff !important;
  color: #111111 !important;
}

select option {
  background: #ffffff !important;
  color: #111111 !important;
}
</style>
</head>
<body>
<div class="container">
  <div class="card">
    <h1>üß† MSRA Flashcards Hub</h1>
    <p>One link ‚Ä¢ multiple decks ‚Ä¢ add new decks anytime</p>

    <div class="controls">
      <select id="deckSelect">
        <option>Loading decks‚Ä¶</option>
      </select>
      <button onclick="openDeck()">Open in new tab ‚ÜóÔ∏è</button>
      <button onclick="reloadDecks()">Reload list üîÑ</button>
    </div>

    <iframe id="deckFrame" title="Flashcards"></iframe>

    <div class="footer">
      <b>How to add future decks:</b><br/>
      1) Upload a new HTML deck file (e.g. <code>deck-2026-01.html</code>)<br/>
      2) Add one entry to <code>decks.json</code>. Done ‚úÖ
    </div>
  </div>
</div>

<script>
let decksData = [];

async function loadDecks(){
  try{
    const res = await fetch('./decks.json?v=' + Date.now());
    const json = await res.json();
    decksData = json.decks || [];
    const sel = document.getElementById('deckSelect');
    sel.innerHTML = '';
    decksData.forEach((d,i)=>{
      const opt = document.createElement('option');
      opt.value = d.file;
      opt.textContent = `${d.title} (${d.cards} cards)`;
      sel.appendChild(opt);
    });
    if(decksData.length){
      document.getElementById('deckFrame').src = decksData[0].file;
    }
  }catch(e){
    alert('Failed to load decks.json');
  }
}

function openDeck(){
  const file = document.getElementById('deckSelect').value;
  if(file) window.open(file,'_blank');
}

function reloadDecks(){
  loadDecks();
}

document.getElementById('deckSelect').addEventListener('change',e=>{
  document.getElementById('deckFrame').src = e.target.value;
});

loadDecks();
</script>
</body>
</html>
